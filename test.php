<?php	define( '_FIRESHIELD', 1 ) ;	require_once dirname(__FILE__).'/inc/config.php' ;	require_once dirname(__FILE__).'/inc/db.php' ;		$id = $_GET['id'];		$doc = new domDocument("1.0", "utf-8");		$doc->formatOutput = true;		$root = $doc->createElement('test');	$root = $doc->appendChild($root);		// получение названия теста	$query = "select name from tests where id = $id;";		$test_query = $db->sql($query);		$title = mysql_fetch_array($test_query, MYSQL_NUM);		$titleNode = $doc->createElement('title', $title[0]);	$root->appendChild($titleNode);		// выбор всех вопросов принадлежащий выбранному тесту	$query = "select id, name, text, type from questions where test_id = $id;";		$questions = $db->sql($query);		// добавляем каждый вопрос	while ($question = mysql_fetch_array($questions, MYSQL_NUM)) {			//echo json_encode($question);		//break;				// узел вопроса		$question_node = $doc->createElement('question');		$root->appendChild($question_node);				// добавляем название вопроса		$name = $doc->createElement('name');		$name->appendChild( $doc->createTextNode($question[1]) );				$question_node->appendChild($name);				// добавляем текст вопроса		$text = $doc->createElement('text');		$text->appendChild( $doc->createTextNode($question[2]) );				$question_node->appendChild($text);				// добавляем тип вопроса		$type = $doc->createElement('type');		$type->appendChild( $doc->createTextNode($question[3]) );				$question_node->appendChild($type);				// добавляем опции вопроса				// выбор всех опций принадлежащий вопросу		$query = "select options.text from options where options.question_id = '$question[0]';";				$options = $db->sql($query);				// добавляем каждую опцию		while ($option = mysql_fetch_array($options, MYSQL_NUM)) {			$opt = $doc->createElement('option');			$opt->appendChild( $doc->createTextNode($option[0]) );						$question_node->appendChild($opt);		}				mysql_free_result($options);		    }		mysql_free_result($questions);		echo $doc->saveXML();?>